http_interactions:
- request:
    method: POST
    uri: https://api.anthropic.com/v1/messages
    body:
      string: '{"model":"claude-sonnet-4-20250514","system":"\n  You are an expert
        R teacher.\n  I am a new R user who wants to improve my programming skills.\n  Help
        me understand the code you produce by explaining each function call with\n  a
        brief comment. For more complicated calls, add documentation to each\n  argument.
        Just give me the code. I don''t want any explanation or sample data.\n","messages":[{"role":"user","content":[{"type":"text","text":"\n  How
        can I compute the mean and median of variables a, b, c, and so on,\n  all
        the way up to z, grouped by age and sex.\n"}]}],"stream":false,"max_tokens":4096}'
  response:
    status: 200
    headers:
      date: Wed, 25 Jun 2025 17:20:21 GMT
      content-type: application/json
      anthropic-ratelimit-input-tokens-limit: '40000'
      anthropic-ratelimit-input-tokens-remaining: '40000'
      anthropic-ratelimit-input-tokens-reset: '2025-06-25T17:20:14Z'
      anthropic-ratelimit-output-tokens-limit: '16000'
      anthropic-ratelimit-output-tokens-remaining: '16000'
      anthropic-ratelimit-output-tokens-reset: '2025-06-25T17:20:21Z'
      anthropic-ratelimit-requests-limit: '1000'
      anthropic-ratelimit-requests-remaining: '999'
      anthropic-ratelimit-requests-reset: '2025-06-25T17:20:13Z'
      anthropic-ratelimit-tokens-limit: '56000'
      anthropic-ratelimit-tokens-remaining: '56000'
      anthropic-ratelimit-tokens-reset: '2025-06-25T17:20:14Z'
      request-id: req_011CQVKgthNfkr8xurxZzDGM
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      via: 1.1 google
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
      cf-ray: 9556225ecf6dc871-DFW
      content-encoding: gzip
    body:
      string: '{"id":"msg_01AgPz6ehtcijarJCcKNXbZ7","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"```r\n#
        Using dplyr for grouped summary statistics\nlibrary(dplyr)\n\n# Group by age
        and sex, then calculate mean and median for variables a through z\nresult
        <- your_data %>%\n  group_by(age, sex) %>%  # Group observations by age and
        sex categories\n  summarise(\n    across(a:z, list(mean = mean, median = median),
        na.rm = TRUE),\n    # across() applies functions to multiple columns\n    #
        a:z selects all columns from ''a'' to ''z''\n    # list(mean = mean, median
        = median) specifies both functions to apply\n    # na.rm = TRUE removes missing
        values before calculation\n    .groups = \"drop\"  # Ungroup the result after
        summarizing\n  )\n\n# Alternative approach using summarise_at (if using older
        dplyr version)\nresult_alt <- your_data %>%\n  group_by(age, sex) %>%\n  summarise_at(\n    vars(a:z),  #
        Select variables from a to z\n    list(mean = ~mean(., na.rm = TRUE), median
        = ~median(., na.rm = TRUE))\n    # ~mean(., na.rm = TRUE) creates anonymous
        function for mean\n    # . represents each column being processed\n  )\n```"}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":120,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":304,"service_tier":"standard"}}'
  recorded_at: 2025-06-25 17:20:21
recorded_with: vcr/1.7.0.91, webmockr/2.0.0
